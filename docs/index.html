<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="João Martins" />


<title>Swiss Participation in EU Framework Programmes</title>

<script src="index_files/header-attrs-2.7/header-attrs.js"></script>
<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="index_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="index_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>
<script src="index_files/core-js-2.5.3/shim.min.js"></script>
<script src="index_files/react-17.0.0/react.min.js"></script>
<script src="index_files/react-17.0.0/react-dom.min.js"></script>
<script src="index_files/reactwidget-1.0.0/react-tools.js"></script>
<script src="index_files/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="index_files/reactable-binding-0.2.3/reactable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Swiss Participation in EU Framework
Programmes</h1>
<h4 class="author">João Martins</h4>

</div>


<pre class="r"><code># source code: https://github.com/zambujo/swissparticipation
library(tidyverse)
library(janitor)
library(here)
library(readxl)
library(scales)
library(ggsci)
library(reactable)
knitr::opts_chunk$set(message = FALSE)
int &lt;- function(x) as.integer(x)
chr &lt;- function(x) as.character(x)
roman &lt;- function(x) as.roman(x)</code></pre>
<!-- badges: start -->
<p><a href="https://github.com/zambujo/swissparticipation"><img
src="https://img.shields.io/github/watchers/zambujo/swissparticipation?style=social" /></a>
<a href="https://github.com/zambujo/swissparticipation/issues"><img
src="https://img.shields.io/github/issues/zambujo/swissparticipation" /></a>
<!-- badges: end --></p>
<blockquote>
<p>Pease find related statistics on the SERI’s page: <a
href="https://www.sbfi.admin.ch/sbfi/en/home/research-and-innovation/international-cooperation-r-and-i/eu-framework-programmes-for-research/f-f-swiss-participation.html">Facts
and Figures on the Swiss Participation in the EU-Framework Programmes
for Research and Innovation</a>.</p>
</blockquote>
<div id="data" class="section level2">
<h2>Data</h2>
<p>Source: <a
href="https://webgate.ec.europa.eu/dashboard/single/?appid=93297a69-09fd-4ef5-889f-b83c4e21d33e&amp;sheet=c616ed33-064c-40c0-803a-e75045b78c05"><strong>Horizon
2020 Dashboard data</strong></a>, last updated on 2021-12-06 (see
glimpse in <a href="#annex">Annex</a>).</p>
<pre class="r"><code># load xlsx table to a data frame
df &lt;-
  here(&quot;data-raw&quot;, &quot;horizon2020.xlsx&quot;) %&gt;%
  read_excel() %&gt;%
  clean_names()

# minimal cleaning ----
df &lt;- df %&gt;%
  mutate(
    # rename role
    partner_role = str_to_title(partner_role),
    # factorize pillars
    pillar = str_extract(pillar_abbr, &quot;\\d&quot;),
    pillar = if_else(pillar_abbr == &quot;EU.0.&quot;, &quot;Cross-theme&quot;, pillar),
    pillar = if_else(pillar_abbr == &quot;Euratom&quot;, pillar_abbr, pillar),
    pillar = fct_inseq(pillar),
    pillar = fct_rev(pillar),
    pillar = fct_relevel(pillar, &quot;Cross-theme&quot;, after = 0),
    pillar = fct_recode(
      pillar, I = &quot;1&quot;, II = &quot;2&quot;, III = &quot;3&quot;, IV = &quot;4&quot;, V = &quot;5&quot;),
    # group entity types
    org_type = fct_collapse(
      legal_entity_type,
      `Research &amp; Education` = c(&quot;HES&quot;, &quot;REC&quot;),
      `Others (Excl. R&amp;Ed)` = c(&quot;PRC&quot;, &quot;PUB&quot;, &quot;OTH&quot;)),
    # import EU contribution
    eu_contribution = str_replace(eu_contribution, fixed(&quot;-&quot;), &quot;0&quot;),
    eu_contribution = as.numeric(eu_contribution),
    # import dates
    signature_date = as.Date(signature_date, format = &quot;%d/%m/%Y&quot;),
    call_deadline_date = as.Date(call_deadline_date, format = &quot;%d/%m/%Y&quot;),
    project_start_date = as.Date(project_start_date, format = &quot;%d/%m/%Y&quot;),
    project_end_date = as.Date(project_end_date, format = &quot;%d/%m/%Y&quot;),
    signature_year = str_sub(signature_date, 1, 4),
    call_year = str_sub(call_deadline_date, 1, 4),
    signature_year = as.integer(signature_year),
    call_year = as.integer(call_year)
  )</code></pre>
</div>
<div id="total-eu-contribution-by-pillar-all-countries"
class="section level2">
<h2>Total EU Contribution by Pillar (All Countries)</h2>
<pre class="r"><code>ggp &lt;- df %&gt;%
  mutate(
    pillar = fct_other(pillar, keep = chr(roman(1:5))),
    pillar = fct_relevel(pillar, &quot;Other&quot;, after = 0)) %&gt;%
  group_by(pillar) %&gt;%
  summarise(size_pillar = sum(eu_contribution)) %&gt;%
  mutate(share = 100 * prop.table(size_pillar),
         fp = &quot;H2020&quot;) %&gt;%
  ggplot(aes(x = fp,  y = size_pillar, fill = pillar)) +
  geom_col(position = position_stack()) +
  geom_text(
    aes(label = sprintf(&quot;%.1f%%&quot;, share)),
    position = position_stack(vjust = 0.5),
    size = 4,
    fontface = &quot;bold&quot;
  ) +
  coord_flip() +
  scale_fill_nejm(alpha = .5, guide = guide_legend(reverse = TRUE)) +
  theme_minimal(base_size = 14) +
  labs(x = NULL, y = NULL) +
  theme(
    legend.position = &quot;bottom&quot;,
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank(),
    axis.text.y = element_blank(),
    axis.ticks.y = element_blank()
  )

ggsave(&quot;budget-allocation.svg&quot;,
       plot = ggp,
       w = 12,
       h = 3)</code></pre>
<p><img
src="https://raw.githubusercontent.com/zambujo/swissparticipation/main/data/budget-allocation.svg"
title="Total EU contribution to the different pillars in H2020." /></p>
</div>
<div id="top-countries" class="section level2">
<h2>Top countries</h2>
<p>Participation count, number of projects (distinct), and total EU
contribution for the top 10 participating countries (by total EU
contribution).</p>
<pre class="r"><code># find and sort top participants
top_participants &lt;- df %&gt;%
  group_by(Country = country) %&gt;%
  summarise(contrib_country = sum(eu_contribution)) %&gt;%
  ungroup() %&gt;%
  arrange(desc(contrib_country))

# calculate further participation statistics
country_participation &lt;- df %&gt;%
  group_by(
    Country = country,
    `Call Year` = call_year,
    Type = org_type) %&gt;%
  summarise(
    `Participation Count` = n(),
    `Nb Projects` = n_distinct(project_nbr),
    `EU Contribution` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  arrange(`Type`, `Call Year`)

# show with reactable
top_participants %&gt;%
  select(Country) %&gt;%
  head(10) %&gt;%
  inner_join(country_participation, by = &quot;Country&quot;) %&gt;%
  reactable(
    groupBy = c(&quot;Country&quot;, &quot;Call Year&quot;),
    columns = list(
      `Participation Count` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(separators = TRUE)),
      `Nb Projects` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(separators = TRUE)),
      `EU Contribution` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(
          currency = &quot;EUR&quot;,
          separators = TRUE,
          digits = 2))),
    highlight = TRUE,
    compact = TRUE
  )</code></pre>
<div id="htmlwidget-157dce612031cbddf1ed" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-157dce612031cbddf1ed">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Country":["Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria"],"Call Year":[2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021],"Type":["Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Research & Education","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)","Others (Excl. R&Ed)"],"Participation Count":[1686,1500,1584,1518,1762,1837,1602,101,1257,1077,1459,1268,1321,1333,1168,106,1946,1764,1792,1571,1611,1459,1197,55,1031,897,1196,836,779,632,486,55,1276,1103,1294,1160,1395,1452,1197,81,926,798,1339,1115,1280,1300,1124,132,1132,989,1283,1155,1414,1569,1581,160,1129,1032,1505,1298,1452,1530,1389,169,998,967,1157,1121,1264,1391,1443,143,990,993,1391,1198,1259,1287,1279,137,841,783,862,781,907,998,887,70,706,568,731,637,749,760,585,126,430,401,530,476,595,660,608,40,542,451,651,619,829,705,748,142,286,386,425,387,480,538,440,24,164,219,281,323,394,435,311,36,417,323,435,374,407,454,438,39,279,225,446,329,324,364,283,31,326,312,302,346,436,439,417,31,279,295,357,356,399,378,343,27],"Nb Projects":[1142,1059,1073,992,1105,1216,1045,54,691,595,775,654,770,767,661,53,1457,1379,1292,1142,1167,1069,919,28,667,561,756,532,531,444,349,37,802,719,763,735,794,905,750,28,560,463,703,593,724,700,622,49,792,726,854,815,908,1048,1058,61,663,602,818,699,776,814,682,56,689,666,735,721,801,912,906,55,593,589,725,633,702,672,651,55,644,598,634,592,685,758,658,43,402,340,457,372,466,454,397,38,357,351,424,413,492,530,490,28,355,298,418,398,517,475,465,52,245,342,378,338,424,481,380,17,143,174,212,254,315,367,252,20,344,273,340,309,334,371,367,27,202,160,305,240,246,258,197,25,273,252,236,280,342,338,329,27,202,202,232,234,287,254,238,19],"EU Contribution":[911822868.44,882193245.93,1104631235.11,944378308.95,1021962414.01,1203356201.27,732932341.98,64515263.49,425937408.87,355854910.62,461272218.47,443048578.05,433546942.41,483489454.87,433287693.12,65069904.48,985535976.5,1012863592.16,954291595.63,894618832.02,832324692.84,760463347.16,509528320.89,22841413.73,292672352.65,282142422.36,335445389.09,279273412.96,197908898.44,187417983.27,164442905.83,34458161.61,619268764.52,538179404.15,601315510.37,637933000.01,685319840.03,767912560.24,461148103.12,29887552.38,305417801.11,236088871.86,415760734.53,553626578.89,442635350.07,569394872.88,417963493.99,60074156.64,435483599.36,419043623.49,495558028.32,464792142.54,544509167.16,688603506.51,590007634.09,53066000.32,252066847.3,293642855.06,381830213.49,435905506.71,359768034,460634913.49,414998511.87,46943408.99,379125133.75,371954574.99,485907707.77,446808077.74,502941749.98,527684420.06,477644960.36,39266505.79,258573447.26,257580216.92,368469953.82,399920537.6,324456597.29,398325437.79,326264233.09,54040798.57,441958488.74,491026024.82,507112661.24,438589015.58,691357429.98,578827044.88,517393827.73,47974339.63,223558380.98,181265609.85,200859501.55,179628393.31,242376615.97,277341354.85,208400239.67,100252590.81,204306420.63,228314264.24,254139452.25,246093261.03,319849792.89,335215586.68,264444705.52,29108205.19,131595835.8,113986203.37,151693339.58,149109359.75,208976962.52,295094742,398935731.95,58273175.33,80595966.4,226834535.05,237398789.13,307008658.97,339381288.1,364982397.91,257665687.14,10023094.66,1752965.66,20133675.61,26601049.49,82411522.15,105611623.16,192911097.26,136462753.06,6850570.63,187292424.7,179576806.57,222564533.76,210818500.86,216016328.39,267674964.7,212055418.12,16222668.42,99294682.09,70483405.87,125132753.73,137422413.68,99680623.95,115045665.51,113438763.1,18538825.4,135217904.69,150653060,150690746.52,159414144.51,183685994.91,230190303.6,166990076.08,12376798.23,92933029.03,98376887.97,97665193.28,100022923.05,119613559.17,107469728.72,109786555.19,7780679.45]},"columns":[{"accessor":"Country","name":"Country","type":"character"},{"accessor":"Call Year","name":"Call Year","type":"numeric"},{"accessor":"Type","name":"Type","type":"factor"},{"accessor":"Participation Count","name":"Participation Count","type":"numeric","aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}}},{"accessor":"Nb Projects","name":"Nb Projects","type":"numeric","aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}}},{"accessor":"EU Contribution","name":"EU Contribution","type":"numeric","aggregate":"sum","format":{"cell":{"digits":2,"separators":true,"currency":"EUR"},"aggregated":{"digits":2,"separators":true,"currency":"EUR"}}}],"pivotBy":["Country","Call Year"],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"compact":true,"dataKey":"68df3aed1eae481d3ce2a0acda0bbebd","key":"68df3aed1eae481d3ce2a0acda0bbebd"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<p>Switzerland ranks 8th by total EU contribution in H2020.</p>
<pre class="r"><code># minimal plotting
ch_rank &lt;- which(pull(top_participants, Country) == &quot;Switzerland&quot;)
pal &lt;- c(
  rep(&quot;gray85&quot;, ch_rank - 1),
  &quot;goldenrod1&quot;,
  rep(&quot;gray85&quot;, 10 - ch_rank)) %&gt;%
  rev()

top_participants %&gt;%
  mutate(
    Country = fct_rev(fct_inorder(Country)),
    share = 100 * prop.table(contrib_country)) %&gt;%
  head(10) %&gt;%
  ggplot(aes(x = contrib_country, y = Country, fill = Country)) +
  geom_col() +
  geom_text(aes(
    label = sprintf(&quot;%.1f%%&quot;, share)),
    hjust = 1.15,
    size = 4,
    fontface = &quot;bold&quot;,
    family = &quot;Fira Sans&quot;) +
  labs(x = NULL,y = NULL) +
  scale_fill_manual(values = pal, guide = &quot;none&quot;) +
  theme_void() +
  theme(
    plot.margin = margin(c(4, 2, 4, 8)),
    axis.text.y = element_text(size = 14, hjust = 1, family = &quot;Fira Sans&quot;))</code></pre>
<p><img src="index_files/figure-html/visual-countries-1.png" width="672" /></p>
<pre class="r"><code># inspired by: 
# https://www.cedricscherer.com/2021/07/05/a-quick-how-to-on-labelling-bar-graphs-in-ggplot2/</code></pre>
</div>
<div id="swiss-participation-an-overview" class="section level2">
<h2>Swiss participation: an overview</h2>
<p>Swiss participation in H2020: participation count, number of projects
(distinct), total EU contribution by pillar, thematic priority, and call
year.</p>
<pre class="r"><code>df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  mutate(pillar = fct_rev(pillar)) %&gt;%
  group_by(
    Pillar = pillar, 
    Priority = thematic_priority_abbr, 
    `Call Year` = call_year) %&gt;%
  summarise(
    `Participation Count` = n(),
    `Nb Projects` = n_distinct(project_nbr),
    `EU Contribution` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  mutate(
    `EU Contribution` = round(`EU Contribution`, 1)
  ) %&gt;%
  reactable(
    groupBy = c(&quot;Pillar&quot;, &quot;Priority&quot;),
    columns = list(
      Pillar = colDef(footer = &quot;Total&quot;),
      `Participation Count` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;)),
      `Nb Projects` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;)),
      `EU Contribution` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(currency = &quot;EUR&quot;, separators = TRUE, digits = 2),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;) %&gt;% str_c(&quot;€&quot;, .))),
    defaultColDef = colDef(footerStyle = list(fontWeight = &quot;bold&quot;)),
    highlight = TRUE,
    compact = TRUE
  )</code></pre>
<div id="htmlwidget-9bb1597fb282200f866e" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9bb1597fb282200f866e">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Pillar":["I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","IV","IV","IV","IV","IV","IV","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","Euratom","Euratom","Euratom","Euratom","Cross-theme","Cross-theme","Cross-theme","Cross-theme"],"Priority":["ERC","ERC","ERC","ERC","ERC","ERC","ERC","FET","FET","FET","FET","FET","FET","FET","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","MSCA","MSCA","MSCA","MSCA","MSCA","MSCA","MSCA","INNOSUPSME","INNOSUPSME","INNOSUPSME","INNOSUPSME","INNOSUPSME","LEIT","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","RISKFINANCE","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENV","ENV","ENV","ENV","ENV","ENV","ENV","ENV","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SOCCHAL-CROSST","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","TPT","TPT","TPT","TPT","TPT","TPT","TPT","TPT","TWINING","TWINING","TWINING","TWINING","WIDESPREAD","WIDESPREAD","CAREER","CAREER","CAREER","CAREER","CAREER","GENDEREQ","GOV","GOV","GOV","GOV","INEGSOC","INEGSOC","INEGSOC","INEGSOC","INEGSOC","RESACCESS","SCIENCE","SCIENCE","SWAFS-CROSST","SWAFS-CROSST","EURATOM","EURATOM","EURATOM","EURATOM","CROSST","CROSST","CROSST","CROSST"],"Call Year":[2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2014,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2020,2014,2015,2016,2017,2018,2019,2020,2014,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2021,2015,2017,2018,2019,2016,2018,2014,2017,2018,2019,2020,2014,2014,2015,2017,2018,2014,2015,2017,2019,2020,2018,2017,2018,2018,2020,2014,2016,2018,2019,2016,2018,2019,2020],"Participation Count":[30,131,98,96,100,107,43,21,5,24,60,57,91,75,39,16,37,33,35,28,43,7,80,161,162,142,179,190,192,3,4,88,106,17,1,11,19,15,27,16,16,21,3,3,17,16,18,16,12,3,2,4,4,11,1,59,66,87,56,72,89,80,14,5,5,15,5,14,11,5,10,12,10,10,1,23,50,51,53,63,51,36,8,28,16,18,29,33,21,24,14,19,21,35,40,24,50,44,6,37,60,60,53,86,72,78,21,5,14,11,15,8,16,12,5,12,3,8,4,9,8,6,23,14,49,45,33,62,35,3,6,2,2,7,3,2,2,2,1,2,2,2,3,1,1,2,2,1,2,4,2,3,1,1,1,5,16,16,15,15,1,3,11,4],"Nb Projects":[29,122,93,91,96,102,43,17,3,18,29,41,45,44,29,12,24,17,27,24,24,3,64,126,131,125,139,172,169,1,1,86,105,17,1,9,10,9,16,11,10,15,2,2,13,10,9,12,10,2,2,4,4,7,1,50,54,58,38,47,54,56,7,4,2,12,4,14,6,5,10,10,8,8,1,20,28,27,37,33,36,26,7,21,12,13,20,23,16,20,10,13,14,24,29,16,32,28,2,25,33,34,34,43,51,47,7,4,8,8,13,7,10,11,5,11,3,7,4,9,7,6,15,14,37,32,26,44,26,2,6,2,2,7,3,2,2,2,1,1,2,2,2,1,1,1,2,1,2,1,1,1,1,1,1,4,11,11,8,12,1,2,9,4],"EU Contribution":[54254099,186586074,143129828.9,173286505.2,172447129,176950805.5,47081831.6,5031336,2509438.5,14423543.1,37399444.4,31338879.6,57389555.5,53766355.7,6454165.6,12104951.8,13165062.2,29042310.6,17155298,9236045.5,51747230.8,2783681.2,12666731.8,32811233.1,36068628,34257439.4,42037734.5,57604189.9,51780845,171759,402131.5,15739361.3,55849931.9,28736010.8,118125,17500,0,0,11766202.5,9337677.5,8786857.2,12837625,0,0,0,4798904.5,4950969,7088351.9,4862318.4,0,0,59812.5,974875,3718840.3,471250,577009.2,5002283.8,3767923.7,18696915.4,33862242.5,43372483.2,34336405.5,24375,543375,0,4540803.8,2589794.3,730625,0,69785.6,2013946.2,4478656.2,2937105.8,2896598.8,0,45220,4152292.3,503071.2,18282576.5,31043314.4,19347288.5,14664417.8,2711386.2,851030.2,0,1796555,8528579.6,11358624.8,11126911.4,6729491.4,5131500,32637.5,1217864.4,2303475,9742398.3,6559053.3,18775307.6,17830534.4,2598908.1,71245.6,810906,2356130.1,11230842.6,34779764.7,52650575,35213196.7,2554439.7,120250,0,2157071.1,6770027,2926429.4,4820571.9,5796444.9,9022139.8,0,0,48937.5,1263502.5,1869528.5,1821018.8,1617738.8,199096.9,0,7018341.8,15411743.5,11551171.4,16676124.8,9441921.2,975625,1229791.8,420816.2,343387.5,1145951.2,160093.8,2826077.5,170625,221850,49000,36852.5,127250,37512.5,0,0,37390.5,503277.5,0,0,330975.9,1119375,667885,396180,0,185875,33725,554708.8,893713.9,36364921.1,4602815.5,3325523.2,606658,897898.9,7361418.9,1827695.6]},"columns":[{"accessor":"Pillar","name":"Pillar","type":"factor","footerStyle":{"fontWeight":"bold"},"footer":"Total"},{"accessor":"Priority","name":"Priority","type":"character","footerStyle":{"fontWeight":"bold"}},{"accessor":"Call Year","name":"Call Year","type":"numeric","footerStyle":{"fontWeight":"bold"}},{"accessor":"Participation Count","name":"Participation Count","type":"numeric","footerStyle":{"fontWeight":"bold"},"aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}},"footer":"5,129"},{"accessor":"Nb Projects","name":"Nb Projects","type":"numeric","footerStyle":{"fontWeight":"bold"},"aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}},"footer":"3,876"},{"accessor":"EU Contribution","name":"EU Contribution","type":"numeric","footerStyle":{"fontWeight":"bold"},"aggregate":"sum","format":{"cell":{"digits":2,"separators":true,"currency":"EUR"},"aggregated":{"digits":2,"separators":true,"currency":"EUR"}},"footer":"€2,396,625,675"}],"pivotBy":["Pillar","Priority"],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"compact":true,"dataKey":"1b12b5308896ae569c28ac0adcfc887f","key":"1b12b5308896ae569c28ac0adcfc887f"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># Differentiate pillars 1 to III
stats_depth_1 &lt;- 
  df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(!pillar %in% chr(roman(1:3))) %&gt;%
  mutate(pillar = fct_rev(pillar)) %&gt;%
  group_by(pillar, pillar_descr) %&gt;%
  summarise(total_eu_contrib = sum(eu_contribution)) %&gt;%
  ungroup() %&gt;%
  # for printing
  mutate(pillar_descr = ifelse(
    chr(pillar) %in% chr(roman(4:5)), 
    str_c(pillar, &quot;. &quot;, pillar_descr),
    chr(pillar)),
    thematic_priority_abbr = NA) %&gt;%
  # for binding
  select(pillar = pillar_descr,
         thematic_priority = thematic_priority_abbr,
         contrib = total_eu_contrib)

stats_depth_2 &lt;- df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(pillar %in% chr(roman(1:3))) %&gt;%
  mutate(pillar = fct_rev(pillar)) %&gt;%
  group_by(pillar, pillar_descr, thematic_priority_abbr) %&gt;%
  summarise(total_eu_contrib = sum(eu_contribution)) %&gt;%
  ungroup() %&gt;%
  # for printing
  unite(&quot;pillar&quot;, starts_with(&quot;pillar&quot;), sep = &quot;. &quot;) %&gt;%
  # for binding
  select(pillar,
         thematic_priority = thematic_priority_abbr,
         contrib = total_eu_contrib)

stats_depth_2 %&gt;%
bind_rows(stats_depth_1) %&gt;%
  mutate(
    thematic_priority = replace_na(thematic_priority, &quot;&quot;),
    contrib_txt = contrib / 1000000,
    contrib_txt = format(
      contrib_txt,
      big.mark = &quot;,&quot;,
      decimal.mark = &quot;.&quot;,
      trim = TRUE,
      digits = 2),
    contrib_txt = str_c(&quot;M€&quot;, contrib_txt)) %&gt;%
  write_csv(here(&quot;data&quot;, &quot;h2020-treemap.csv&quot;))
# plot with https://rawgraphs.io</code></pre>
<p>A treemap showing the overall H2020 EU contribution (MEUR) to
Switzerland by Pillar and Thematic Priority. Only the three largest
pillars are shown.</p>
<p><img
src="https://raw.githubusercontent.com/zambujo/swissparticipation/main/data/treemap-ch.svg"
title="H2020 EU contribution to Swiss participants, by pillar and thematic priority." /></p>
<div id="swiss-participation-by-sector" class="section level3">
<h3>Swiss participation by sector</h3>
<pre class="r"><code>df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  mutate(
    pillar = fct_other(pillar, keep = chr(roman(1:5))),
    pillar = fct_relevel(pillar, &quot;Other&quot;, after = 0)) %&gt;%
  group_by(pillar, org_type, role = partner_role) %&gt;%
  summarise(contrib = sum(eu_contribution)) %&gt;%
  ungroup() %&gt;%
  mutate(org_type = fct_rev(org_type)) %&gt;%
  arrange(pillar, org_type) %&gt;%
  ggplot(aes(x = pillar, y = contrib, fill = org_type)) +
  geom_col(position = position_stack(reverse = FALSE)) +
  scale_fill_nejm(alpha = .5, guide = guide_legend(reverse = TRUE)) +
  scale_y_continuous(labels=unit_format(suffix=&quot;&quot;, scale = 1e-6, big.mark = &quot;,&quot;)) +
  coord_flip() +
  facet_grid(role ~ .) +
  theme_minimal(base_size = 14) +
  labs(
    title = &quot;Pillar I is the primary source of funding for CH&quot;,
    subtitle = &quot;With a high proportion of Research &amp; Education organisations&quot;,
    x = &quot;Pillar&quot;,
    y = &quot;EU Contribution to Swiss Institutions (MioEUR)&quot;
  ) +
  theme(
    plot.title.position = &quot;plot&quot;,
    legend.position = &quot;bottom&quot;,
    legend.title = element_blank()
  )</code></pre>
<p><img
src="index_files/figure-html/ch-type-role-1.png" /><!-- --></p>
<div
id="eu-contributions-commited-to-swiss-institutions-in-research-and-higher-education"
class="section level4">
<h4>EU contributions commited to Swiss institutions in research and
higher education</h4>
<pre class="r"><code>df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(org_type == &quot;Research &amp; Education&quot;) %&gt;%
  mutate(pillar = fct_rev(pillar)) %&gt;%
  group_by(
    Pillar = pillar, 
    Priority = thematic_priority_abbr, 
    `Call Year` = call_year) %&gt;%
  summarise(
    `Participation Count` = n(),
    `Nb Projects` = n_distinct(project_nbr),
    `EU Contribution to R&amp;Ed` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  mutate(
    `EU Contribution to R&amp;Ed` = round(`EU Contribution to R&amp;Ed`, 1)
  ) %&gt;%
  reactable(
    groupBy = c(&quot;Pillar&quot;, &quot;Priority&quot;),
    columns = list(
      Pillar = colDef(footer = &quot;Total&quot;),
      `Participation Count` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;)),
      `Nb Projects` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;)),
      `EU Contribution to R&amp;Ed` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(currency = &quot;EUR&quot;, separators = TRUE, digits = 2),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;) %&gt;% str_c(&quot;€&quot;, .))),
    defaultColDef = colDef(footerStyle = list(fontWeight = &quot;bold&quot;)),
    highlight = TRUE,
    compact = TRUE
  )</code></pre>
<div id="htmlwidget-d42984e90c53d31d1782" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d42984e90c53d31d1782">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Pillar":["I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","IV","IV","IV","IV","IV","IV","V","V","V","V","V","V","V","V","V","V","V","V","V","V","Euratom","Euratom","Euratom","Euratom","Cross-theme","Cross-theme"],"Priority":["ERC","ERC","ERC","ERC","ERC","ERC","ERC","FET","FET","FET","FET","FET","FET","FET","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","MSCA","MSCA","MSCA","MSCA","MSCA","MSCA","MSCA","INNOSUPSME","INNOSUPSME","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENV","ENV","ENV","ENV","ENV","ENV","ENV","ENV","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","TPT","TPT","TPT","TPT","TPT","TPT","TPT","TWINING","TWINING","TWINING","TWINING","WIDESPREAD","WIDESPREAD","CAREER","CAREER","CAREER","CAREER","GENDEREQ","GOV","INEGSOC","INEGSOC","INEGSOC","INEGSOC","INEGSOC","RESACCESS","SCIENCE","SWAFS-CROSST","EURATOM","EURATOM","EURATOM","EURATOM","CROSST","CROSST"],"Call Year":[2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2014,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2018,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2015,2017,2018,2019,2016,2018,2014,2017,2018,2020,2014,2018,2014,2015,2017,2019,2020,2018,2017,2020,2014,2016,2018,2019,2019,2020],"Participation Count":[30,122,95,92,96,104,41,17,5,17,42,39,53,50,34,14,30,22,24,23,34,5,50,115,118,98,129,160,154,2,1,7,6,8,8,5,7,8,1,2,8,6,7,5,3,2,1,1,4,26,33,41,21,27,37,39,8,3,3,6,3,8,5,2,2,7,5,6,6,18,24,20,27,23,15,2,18,9,7,15,23,10,17,9,12,4,18,13,13,21,23,2,24,29,21,21,34,32,23,6,4,7,6,4,3,4,5,8,3,7,3,7,5,3,12,4,4,8,13,20,8,5,2,2,6,2,2,2,2,1,1,2,2,1,1,1,4,1,1,1,3,12,13,14,15,4,2],"Nb Projects":[29,116,90,89,93,101,41,15,3,14,27,35,37,31,27,12,19,13,21,21,21,3,46,100,111,95,115,149,145,1,1,7,6,8,7,5,7,8,1,1,8,5,6,5,3,2,1,1,4,24,31,37,19,27,31,33,4,2,2,5,3,8,4,2,2,7,4,6,6,14,17,16,21,21,14,2,15,8,7,10,17,8,15,6,9,4,14,13,11,18,18,1,17,22,19,19,25,30,19,5,4,5,6,2,3,4,5,7,3,6,3,7,5,3,9,4,4,7,12,17,7,5,2,2,6,2,2,2,2,1,1,2,1,1,1,1,1,1,1,1,3,9,11,8,12,4,2],"EU Contribution to R&Ed":[54254099,177233334.6,141331713.4,167444056.5,169859906,171258566.8,44932321.6,4393681,2509438.5,10351718.6,30334964.7,22263565.7,42876537.5,41676918,6454165.6,11717764.3,10738499.9,28017653.1,15112263.2,8399260.5,48686736.3,2743681.2,12300792.6,28504580,32845210.6,25439228.5,35448491.5,50943558.9,42544447.4,171759,0,17500,0,0,5253315.8,6058733.8,5211375,6079806.2,0,0,0,2475493.8,2694203,3212753.8,1118218.8,0,0,0,1959490.5,186500,4713921.8,1283970.5,9059470.8,16740665.7,22645383.2,19686762.7,24375,0,0,3329112.5,1676400.5,649412.5,0,0,449650,3021661.8,1681238.8,1975848.8,0,414048.1,210438.8,7970786.6,17393560.1,10673591.2,7407042.2,1106875,851030.2,0,646080,4662820.4,9609432.2,2684695.2,5070217.9,2994102.5,31437.5,0,1359228.8,5619726.5,3599844.9,8058982.3,12517618.2,966941.2,71245.6,787156,1887405.1,8629225.5,20795736,19907159.4,15643694.1,2211494.7,120250,0,791783.6,2260627.3,1022292.8,1719277.9,2214908.8,0,0,48937.5,1133877.5,1531842.2,1203906.3,972951.3,40000,0,0,4109507.3,4220705.8,7088146.8,3612706.1,954291.8,420816.2,343387.5,889930,113718.8,2826077.5,170625,221850,49000,102500,37512.5,503277.5,0,0,176475.9,1119375,444328.8,286655,0,317953.8,821581,35790083.6,4040495.3,3325523.2,2083136.2,984305.6]},"columns":[{"accessor":"Pillar","name":"Pillar","type":"factor","footerStyle":{"fontWeight":"bold"},"footer":"Total"},{"accessor":"Priority","name":"Priority","type":"character","footerStyle":{"fontWeight":"bold"}},{"accessor":"Call Year","name":"Call Year","type":"numeric","footerStyle":{"fontWeight":"bold"}},{"accessor":"Participation Count","name":"Participation Count","type":"numeric","footerStyle":{"fontWeight":"bold"},"aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}},"footer":"2,966"},{"accessor":"Nb Projects","name":"Nb Projects","type":"numeric","footerStyle":{"fontWeight":"bold"},"aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}},"footer":"2,605"},{"accessor":"EU Contribution to R&Ed","name":"EU Contribution to R&Ed","type":"numeric","footerStyle":{"fontWeight":"bold"},"aggregate":"sum","format":{"cell":{"digits":2,"separators":true,"currency":"EUR"},"aggregated":{"digits":2,"separators":true,"currency":"EUR"}},"footer":"€1,823,890,417"}],"pivotBy":["Pillar","Priority"],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"compact":true,"dataKey":"d2f1526ca4f27a7e869c16865dee859a","key":"d2f1526ca4f27a7e869c16865dee859a"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<hr />
</div>
</div>
</div>
<div id="annex" class="section level2">
<h2>Annex</h2>
<div id="raw-data" class="section level3">
<h3>Raw Data</h3>
<p>The raw data contains 176,512 rows with the following details on
every participant on each project:</p>
<pre class="r"><code>df %&gt;%
  glimpse()</code></pre>
<pre><code>## Rows: 176,512
## Columns: 38
## $ framework_programme       &lt;chr&gt; &quot;H2020&quot;, &quot;H2020&quot;, &quot;H2020&quot;, &quot;H2020&quot;, &quot;H2020&quot;,…
## $ call_id                   &lt;chr&gt; &quot;CIP-2016-2017-1&quot;, &quot;CIP-2016-2017-1&quot;, &quot;CIP-2…
## $ topic_code                &lt;chr&gt; &quot;CIP-01-2016-2017&quot;, &quot;CIP-01-2016-2017&quot;, &quot;CIP…
## $ topic_descr               &lt;chr&gt; &quot;Prevention, detection, response and mitigat…
## $ project_nbr               &lt;dbl&gt; 740477, 740477, 740477, 740477, 740477, 7404…
## $ cordis_link               &lt;chr&gt; &quot;http://cordis.europa.eu/project/id/740477&quot;,…
## $ project_acronym           &lt;chr&gt; &quot;SAURON&quot;, &quot;SAURON&quot;, &quot;SAURON&quot;, &quot;SAURON&quot;, &quot;SAU…
## $ project_title             &lt;chr&gt; &quot;Scalable multidimensionAl sitUation awaRene…
## $ partner_role              &lt;chr&gt; &quot;Coordinator&quot;, &quot;Participant&quot;, &quot;Participant&quot;,…
## $ partner_type              &lt;chr&gt; &quot;BENEFICIARY&quot;, &quot;BENEFICIARY&quot;, &quot;BENEFICIARY&quot;,…
## $ general_pic               &lt;dbl&gt; 998709188, 929905439, 960040429, 986190853, …
## $ legal_entity_vat          &lt;chr&gt; &quot;ESG97360325&quot;, &quot;ESA46604815&quot;, &quot;-&quot;, &quot;ESB96863…
## $ legal_name                &lt;chr&gt; &quot;FUNDACION DE LA COMUNIDAD VALENCIANA PARA L…
## $ legal_entity_type         &lt;chr&gt; &quot;REC&quot;, &quot;PRC&quot;, &quot;PRC&quot;, &quot;PRC&quot;, &quot;PUB&quot;, &quot;PRC&quot;, &quot;R…
## $ legal_entity_type_descr   &lt;chr&gt; &quot;Research organisations&quot;, &quot;Private for profi…
## $ city                      &lt;chr&gt; &quot;VALENCIA&quot;, &quot;VALENCIA&quot;, &quot;MALVERN&quot;, &quot;VALENCIA…
## $ nuts_3_code               &lt;chr&gt; &quot;ES523&quot;, &quot;ES523&quot;, &quot;UKG12&quot;, &quot;ES523&quot;, &quot;ITI16&quot;,…
## $ nuts_3_name               &lt;chr&gt; &quot;Valencia/València&quot;, &quot;Valencia/València&quot;, &quot;W…
## $ country_code              &lt;chr&gt; &quot;ES&quot;, &quot;ES&quot;, &quot;UK&quot;, &quot;ES&quot;, &quot;IT&quot;, &quot;EL&quot;, &quot;AT&quot;, &quot;E…
## $ country                   &lt;chr&gt; &quot;Spain&quot;, &quot;Spain&quot;, &quot;United Kingdom&quot;, &quot;Spain&quot;,…
## $ eu_contribution           &lt;dbl&gt; 846037.50, 264269.25, 290566.50, 641147.50, …
## $ h2020_net_eu_contribution &lt;dbl&gt; 846037.50, 264269.25, 290566.50, 641147.50, …
## $ h2020_total_cost          &lt;dbl&gt; 846037.5, 414527.5, 415095.0, 915925.0, 3362…
## $ signature_date            &lt;date&gt; 2017-04-17, 2017-04-17, 2017-04-17, 2017-04…
## $ call_deadline_date        &lt;date&gt; 2016-08-25, 2016-08-25, 2016-08-25, 2016-08…
## $ thematic_priority_abbr    &lt;chr&gt; &quot;SECURITY&quot;, &quot;SECURITY&quot;, &quot;SECURITY&quot;, &quot;SECURIT…
## $ thematic_priority_descr   &lt;chr&gt; &quot;Secure societies - Protecting freedom and s…
## $ sme_flag                  &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, …
## $ project_start_date        &lt;date&gt; 2017-05-01, 2017-05-01, 2017-05-01, 2017-05…
## $ project_end_date          &lt;date&gt; 2020-09-30, 2020-09-30, 2020-09-30, 2020-09…
## $ pillar_abbr               &lt;chr&gt; &quot;EU.3.&quot;, &quot;EU.3.&quot;, &quot;EU.3.&quot;, &quot;EU.3.&quot;, &quot;EU.3.&quot;,…
## $ pillar_descr              &lt;chr&gt; &quot;Societal Challenges&quot;, &quot;Societal Challenges&quot;…
## $ simplified_type_of_action &lt;chr&gt; &quot;Innovation action&quot;, &quot;Innovation action&quot;, &quot;I…
## $ focus_area                &lt;chr&gt; &quot;Not applicable&quot;, &quot;Not applicable&quot;, &quot;Not app…
## $ pillar                    &lt;fct&gt; III, III, III, III, III, III, III, III, III,…
## $ org_type                  &lt;fct&gt; Research &amp; Education, Others (Excl. R&amp;Ed), O…
## $ signature_year            &lt;int&gt; 2017, 2017, 2017, 2017, 2017, 2017, 2017, 20…
## $ call_year                 &lt;int&gt; 2016, 2016, 2016, 2016, 2016, 2016, 2016, 20…</code></pre>
</div>
<div id="cern" class="section level3">
<h3>CERN</h3>
<pre class="r"><code>total_cern &lt;- df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(legal_name == &quot;EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH&quot;) %&gt;%
  summarise(total_eu_contrib = sum(eu_contribution)) %&gt;%
  pull() %&gt;%
  format(big.mark = &quot;,&quot;, decimal.mark = &quot;.&quot;, trim = TRUE, digits = 11)</code></pre>
<p><strong>Note</strong>: EU Contribution to Switzerland include
€117,572,425.46 awarded to the CERN. Please see the EU contribution to
CERN detailed below:</p>
<pre class="r"><code>df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(legal_name == &quot;EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH&quot;) %&gt;%
  mutate(pillar = fct_rev(pillar)) %&gt;%
  group_by(Pillar = pillar, Priority = thematic_priority_abbr) %&gt;%
  summarise(`EU Contribution` = sum(eu_contribution)) %&gt;%
  ungroup() %&gt;%
  mutate(Share = prop.table(`EU Contribution`)) %&gt;%
  arrange(desc(Share)) %&gt;%
  relocate(Priority) %&gt;%
  reactable(
    columns = list(
      Pillar = colDef(footer = &quot;Total&quot;),
      `EU Contribution` = colDef(
        format = colFormat(
          currency = &quot;EUR&quot;,
          separators = TRUE, 
          digits = 10),
        footer = function(values) sum(values) %&gt;% format(big.mark = &quot;,&quot;) %&gt;% str_c(&quot;€&quot;, .)),
      Share = colDef(format = colFormat(percent = TRUE, digits = 1),
                     footer = function(values) sum(100 * values) %&gt;% str_c(&quot;%&quot;))),
    defaultColDef = colDef(footerStyle = list(fontWeight = &quot;bold&quot;)),
    highlight = TRUE,
    compact = TRUE
  )</code></pre>
<div id="htmlwidget-c5964d744d7a712914d2" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c5964d744d7a712914d2">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Priority":["INFRA","MSCA","ERC","LEIT-ICT","FET","LEIT-SPACE","EURATOM","INEGSOC","CAREER","TWINING"],"Pillar":["I","I","I","II","I","II","Euratom","V","V","IV"],"EU Contribution":[80459695.2,15211992.86,10813051.25,8723530.4,658457.5,595633.75,501412,293750,170625,144277.5],"Share":[0.684341544245625,0.129384018408086,0.0919692794266524,0.0741970778085877,0.00560044157823399,0.00506610072616597,0.00426470746042905,0.00249845998201286,0.00145123313848832,0.00122713722571867]},"columns":[{"accessor":"Priority","name":"Priority","type":"character","footerStyle":{"fontWeight":"bold"}},{"accessor":"Pillar","name":"Pillar","type":"factor","footerStyle":{"fontWeight":"bold"},"footer":"Total"},{"accessor":"EU Contribution","name":"EU Contribution","type":"numeric","footerStyle":{"fontWeight":"bold"},"format":{"cell":{"digits":10,"separators":true,"currency":"EUR"},"aggregated":{"digits":10,"separators":true,"currency":"EUR"}},"footer":"€117,572,425"},{"accessor":"Share","name":"Share","type":"numeric","footerStyle":{"fontWeight":"bold"},"format":{"cell":{"digits":1,"percent":true},"aggregated":{"digits":1,"percent":true}},"footer":"100%"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"compact":true,"dataKey":"8815d75e37ea552a22f204de195a0490","key":"8815d75e37ea552a22f204de195a0490"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
