<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>ðŸš§ Swiss Participation in EU Framework Programmes ðŸš§</title>

<script src="index_files/header-attrs-2.7/header-attrs.js"></script>
<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="index_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="index_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>
<script src="index_files/core-js-2.5.3/shim.min.js"></script>
<script src="index_files/react-17.0.0/react.min.js"></script>
<script src="index_files/react-17.0.0/react-dom.min.js"></script>
<script src="index_files/reactwidget-1.0.0/react-tools.js"></script>
<script src="index_files/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="index_files/reactable-binding-0.2.3/reactable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "î‰™";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "î‰™";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">ðŸš§ Swiss Participation in EU Framework Programmes ðŸš§</h1>

</div>


<pre class="r"><code># source code: https://github.com/zambujo/swissparticipation
library(tidyverse)
library(readxl)
library(here)
library(janitor)
library(reactable)
knitr::opts_chunk$set(message = FALSE)</code></pre>
<p><a href="https://github.com/zambujo/swissparticipation"><img src="https://img.shields.io/github/watchers/zambujo/swissparticipation?style=social" /></a> <a href="https://github.com/zambujo/swissparticipation/issues"><img src="https://img.shields.io/github/issues/zambujo/swissparticipation" /></a></p>
<div id="h2020-dashboard-data" class="section level1">
<h1>H2020 dashboard data</h1>
<div id="raw-data" class="section level2">
<h2>Raw data</h2>
<p>The <a href="https://webgate.ec.europa.eu/dashboard"><strong>Horizon 2020 Dashboard</strong></a> project data was last updated 2021-12-06 (see data <a href="https://webgate.ec.europa.eu/dashboard/single/?appid=93297a69-09fd-4ef5-889f-b83c4e21d33e&amp;sheet=c616ed33-064c-40c0-803a-e75045b78c05">here</a>). The data contains 176,512 rows with the following details on every participant on each project:</p>
<pre class="r"><code>df &lt;-
  here(&quot;data-raw&quot;, &quot;horizon2020.xlsx&quot;) %&gt;%
  read_excel() %&gt;%
  clean_names()

# minimal cleaning ----
df &lt;- df %&gt;%
  mutate(
    # rename pillars
    pillar_abbr = str_replace(pillar_abbr, fixed(&quot;EU.0.&quot;), &quot;Cross-theme&quot;),
    pillar_abbr = str_replace(pillar_abbr, fixed(&quot;EU.1.&quot;), &quot;I&quot;),
    pillar_abbr = str_replace(pillar_abbr, fixed(&quot;EU.2.&quot;), &quot;II&quot;),
    pillar_abbr = str_replace(pillar_abbr, fixed(&quot;EU.3.&quot;), &quot;III&quot;),
    pillar_abbr = str_replace(pillar_abbr, fixed(&quot;EU.4.&quot;), &quot;IV&quot;),
    pillar_abbr = str_replace(pillar_abbr, fixed(&quot;EU.5.&quot;), &quot;V&quot;),
    # import EU contribution
    eu_contribution = str_replace(eu_contribution, fixed(&quot;-&quot;), &quot;0&quot;),
    eu_contribution = as.numeric(eu_contribution),
    # import dates
    signature_date = as.Date(signature_date, format = &quot;%d/%m/%Y&quot;),
    call_deadline_date = as.Date(call_deadline_date, format = &quot;%d/%m/%Y&quot;),
    project_start_date = as.Date(project_start_date, format = &quot;%d/%m/%Y&quot;),
    project_end_date = as.Date(project_end_date, format = &quot;%d/%m/%Y&quot;),
    signature_year = str_sub(signature_date, 1, 4),
    call_year = str_sub(call_deadline_date, 1, 4),
    signature_year = as.integer(signature_year),
    call_year = as.integer(call_year)
  )

df %&gt;%
  glimpse()</code></pre>
<pre><code>## Rows: 176,512
## Columns: 36
## $ framework_programme       &lt;chr&gt; &quot;H2020&quot;, &quot;H2020&quot;, &quot;H2020&quot;, &quot;H2020&quot;, &quot;H2020&quot;,â€¦
## $ call_id                   &lt;chr&gt; &quot;CIP-2016-2017-1&quot;, &quot;CIP-2016-2017-1&quot;, &quot;CIP-2â€¦
## $ topic_code                &lt;chr&gt; &quot;CIP-01-2016-2017&quot;, &quot;CIP-01-2016-2017&quot;, &quot;CIPâ€¦
## $ topic_descr               &lt;chr&gt; &quot;Prevention, detection, response and mitigatâ€¦
## $ project_nbr               &lt;dbl&gt; 740477, 740477, 740477, 740477, 740477, 7404â€¦
## $ cordis_link               &lt;chr&gt; &quot;http://cordis.europa.eu/project/id/740477&quot;,â€¦
## $ project_acronym           &lt;chr&gt; &quot;SAURON&quot;, &quot;SAURON&quot;, &quot;SAURON&quot;, &quot;SAURON&quot;, &quot;SAUâ€¦
## $ project_title             &lt;chr&gt; &quot;Scalable multidimensionAl sitUation awaReneâ€¦
## $ partner_role              &lt;chr&gt; &quot;COORDINATOR&quot;, &quot;PARTICIPANT&quot;, &quot;PARTICIPANT&quot;,â€¦
## $ partner_type              &lt;chr&gt; &quot;BENEFICIARY&quot;, &quot;BENEFICIARY&quot;, &quot;BENEFICIARY&quot;,â€¦
## $ general_pic               &lt;dbl&gt; 998709188, 929905439, 960040429, 986190853, â€¦
## $ legal_entity_vat          &lt;chr&gt; &quot;ESG97360325&quot;, &quot;ESA46604815&quot;, &quot;-&quot;, &quot;ESB96863â€¦
## $ legal_name                &lt;chr&gt; &quot;FUNDACION DE LA COMUNIDAD VALENCIANA PARA Lâ€¦
## $ legal_entity_type         &lt;chr&gt; &quot;REC&quot;, &quot;PRC&quot;, &quot;PRC&quot;, &quot;PRC&quot;, &quot;PUB&quot;, &quot;PRC&quot;, &quot;Râ€¦
## $ legal_entity_type_descr   &lt;chr&gt; &quot;Research organisations&quot;, &quot;Private for profiâ€¦
## $ city                      &lt;chr&gt; &quot;VALENCIA&quot;, &quot;VALENCIA&quot;, &quot;MALVERN&quot;, &quot;VALENCIAâ€¦
## $ nuts_3_code               &lt;chr&gt; &quot;ES523&quot;, &quot;ES523&quot;, &quot;UKG12&quot;, &quot;ES523&quot;, &quot;ITI16&quot;,â€¦
## $ nuts_3_name               &lt;chr&gt; &quot;Valencia/ValÃ¨ncia&quot;, &quot;Valencia/ValÃ¨ncia&quot;, &quot;Wâ€¦
## $ country_code              &lt;chr&gt; &quot;ES&quot;, &quot;ES&quot;, &quot;UK&quot;, &quot;ES&quot;, &quot;IT&quot;, &quot;EL&quot;, &quot;AT&quot;, &quot;Eâ€¦
## $ country                   &lt;chr&gt; &quot;Spain&quot;, &quot;Spain&quot;, &quot;United Kingdom&quot;, &quot;Spain&quot;,â€¦
## $ eu_contribution           &lt;dbl&gt; 846037.50, 264269.25, 290566.50, 641147.50, â€¦
## $ h2020_net_eu_contribution &lt;dbl&gt; 846037.50, 264269.25, 290566.50, 641147.50, â€¦
## $ h2020_total_cost          &lt;dbl&gt; 846037.5, 414527.5, 415095.0, 915925.0, 3362â€¦
## $ signature_date            &lt;date&gt; 2017-04-17, 2017-04-17, 2017-04-17, 2017-04â€¦
## $ call_deadline_date        &lt;date&gt; 2016-08-25, 2016-08-25, 2016-08-25, 2016-08â€¦
## $ thematic_priority_abbr    &lt;chr&gt; &quot;SECURITY&quot;, &quot;SECURITY&quot;, &quot;SECURITY&quot;, &quot;SECURITâ€¦
## $ thematic_priority_descr   &lt;chr&gt; &quot;Secure societies - Protecting freedom and sâ€¦
## $ sme_flag                  &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, â€¦
## $ project_start_date        &lt;date&gt; 2017-05-01, 2017-05-01, 2017-05-01, 2017-05â€¦
## $ project_end_date          &lt;date&gt; 2020-09-30, 2020-09-30, 2020-09-30, 2020-09â€¦
## $ pillar_abbr               &lt;chr&gt; &quot;III&quot;, &quot;III&quot;, &quot;III&quot;, &quot;III&quot;, &quot;III&quot;, &quot;III&quot;, &quot;Iâ€¦
## $ pillar_descr              &lt;chr&gt; &quot;Societal Challenges&quot;, &quot;Societal Challenges&quot;â€¦
## $ simplified_type_of_action &lt;chr&gt; &quot;Innovation action&quot;, &quot;Innovation action&quot;, &quot;Iâ€¦
## $ focus_area                &lt;chr&gt; &quot;Not applicable&quot;, &quot;Not applicable&quot;, &quot;Not appâ€¦
## $ signature_year            &lt;int&gt; 2017, 2017, 2017, 2017, 2017, 2017, 2017, 20â€¦
## $ call_year                 &lt;int&gt; 2016, 2016, 2016, 2016, 2016, 2016, 2016, 20â€¦</code></pre>
</div>
<div id="top-countries" class="section level2">
<h2>Top countries</h2>
<p>Participation count, number of projects (distinct), and total EU contribution for the top 10 participating countries (by total EU contribution).</p>
<pre class="r"><code>top10 &lt;- df %&gt;%
  group_by(Country = country) %&gt;%
  summarise(
    `EU Contribution` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  arrange(desc(`EU Contribution`)) %&gt;%
  select(Country) %&gt;%
  head(10)

country_participation &lt;- df %&gt;%
  group_by(
    Country = country,
    `Call Year` = call_year,
    Type = legal_entity_type_descr) %&gt;%
  summarise(
    `Participation Count` = n(),
    `Nb Projects` = n_distinct(project_nbr),
    `EU Contribution` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  arrange(`Type`, `Call Year`)
  
top10 %&gt;%
  inner_join(country_participation, by = &quot;Country&quot;) %&gt;%
  reactable(
    groupBy = c(&quot;Country&quot;, &quot;Call Year&quot;),
    columns = list(
      `Participation Count` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(separators = TRUE)),
      `Nb Projects` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE)),
      `EU Contribution` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(currency = &quot;EUR&quot;, separators = TRUE, digits = 2))
    ),
    highlight = TRUE,
    compact = TRUE
  )</code></pre>
<div id="htmlwidget-aaf6759b3c80f46e089e" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-aaf6759b3c80f46e089e">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Country":["Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria"],"Call Year":[2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021],"Type":["Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Higher or secondary education","Others","Others","Others","Others","Others","Others","Others","Others","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Private for profit (excl. education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Public body (excl. research and education)","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations","Research organisations"],"Participation Count":[871,830,802,871,900,1000,883,32,84,76,94,123,137,130,137,28,1123,942,1255,1081,1090,1123,954,69,50,59,110,64,94,80,77,9,815,670,782,647,862,837,719,69,1694,1559,1536,1418,1411,1295,1076,42,106,88,122,92,92,61,66,8,813,716,965,668,606,521,376,43,112,93,109,76,81,50,44,4,252,205,256,153,200,164,121,13,465,427,506,461,546,561,516,30,114,97,146,109,151,171,172,28,737,644,1021,914,1027,1024,828,93,75,57,172,92,102,105,124,11,811,676,788,699,849,891,681,51,450,383,477,446,553,619,617,64,99,94,122,109,138,159,178,25,884,792,1144,1041,1151,1189,981,111,146,146,239,148,163,182,230,33,682,606,806,709,861,950,964,96,559,590,613,667,743,868,906,69,80,80,121,110,139,118,147,24,801,794,1120,993,1001,1055,971,96,109,119,150,95,119,114,161,17,439,377,544,454,521,523,537,74,577,557,537,554,624,707,630,38,84,48,87,71,99,98,96,27,572,482,563,518,592,607,450,89,50,38,81,48,58,55,39,10,264,226,325,227,283,291,257,32,223,224,264,266,322,333,346,13,232,135,241,227,362,271,332,61,272,271,357,355,416,387,370,69,38,45,53,37,51,47,46,12,207,177,266,210,273,327,262,27,199,331,319,309,381,426,344,16,23,15,17,23,39,33,42,2,125,180,234,258,331,367,247,31,16,24,30,42,24,35,22,3,87,55,106,78,99,112,96,8,327,271,355,307,341,393,368,24,19,8,28,18,17,26,28,6,219,176,314,253,254,271,195,17,41,41,104,58,53,67,60,8,90,52,80,67,66,61,70,15,190,182,156,203,233,251,239,12,50,35,46,49,77,57,60,1,205,238,277,281,304,300,262,21,24,22,34,26,18,21,21,5,136,130,146,143,203,188,178,19],"Nb Projects":[693,664,624,630,677,758,663,23,76,69,80,100,118,117,119,21,618,531,690,572,668,675,565,34,46,51,78,57,67,57,55,7,639,574,621,531,647,672,561,46,1343,1281,1185,1082,1082,994,856,23,95,77,105,83,80,54,59,8,558,489,652,439,436,375,278,32,101,74,90,66,70,45,40,4,208,174,212,129,167,137,112,11,354,321,363,349,393,421,391,14,102,77,119,95,123,136,133,21,464,397,568,493,620,591,498,39,59,49,130,70,76,82,95,9,623,547,584,542,605,674,518,26,385,352,397,388,449,529,522,33,81,73,96,99,119,133,145,17,556,514,693,607,668,696,539,44,117,104,166,109,117,139,172,24,530,477,577,549,623,693,707,52,463,468,466,506,583,665,676,42,70,65,95,89,108,92,118,14,505,512,640,554,617,598,550,43,88,90,95,77,84,91,115,13,344,306,414,359,397,409,414,40,493,468,453,470,524,587,513,30,70,41,72,65,82,80,80,20,334,297,364,312,386,378,321,28,47,30,65,39,51,48,32,9,226,194,259,190,245,258,229,23,207,212,237,248,304,299,313,13,163,110,186,176,258,217,244,36,211,201,253,255,318,288,268,25,32,29,42,30,38,38,34,9,177,159,223,194,229,284,230,19,176,301,299,280,347,393,310,14,22,14,17,21,36,30,40,2,111,145,177,218,275,318,210,18,14,24,27,34,24,33,20,2,85,53,99,73,92,106,85,8,284,242,304,279,292,341,323,22,18,7,25,16,14,23,24,5,160,127,227,188,197,205,143,15,38,36,94,53,48,60,56,7,80,43,54,52,58,54,62,9,178,167,138,179,216,224,217,11,47,33,40,47,71,51,57,1,146,170,194,184,230,206,188,16,23,18,21,22,14,17,14,4,124,111,126,128,164,154,146,16],"EU Contribution":[467421105.3,486040679.64,494777867.01,505030570.24,512052893.37,626332886.41,384932792.78,29072002.69,18837411.89,20308262.25,30262038.17,37063570.7,40411411.22,44834534.45,39039527.3,12206772.5,389318699.66,313506992.24,406665354.38,386801485.93,376646548.16,420150839.31,374577547.19,49088418.85,17781297.32,22039656.13,24344825.92,19183521.42,16488983.03,18504081.11,19670618.63,3774713.13,444401763.14,396152566.29,609853368.1,439347738.71,509909520.64,577023314.86,347999549.2,35443260.8,875900128.23,915255508,770013065.43,827926310.53,753750475.2,692571139.1,465371244.76,16716551.5,21901248.02,19448372.89,48915440.39,25968395.93,28433287.98,13247556.55,33148487.88,3356049.75,230331675.26,225919241.83,250370238.04,227177774.34,153617528.1,162570256.99,119195743.58,29767538.86,40439429.37,36774807.64,36159710.66,26127242.69,15858082.36,11600169.73,12098674.37,1334573,109635848.27,97608084.16,184278530.2,66692521.49,78574217.64,67892208.06,44157076.13,6124862.23,157195764.43,142361455.21,141815626.18,158764824.92,170537752.95,195977895.23,145661777.36,3309247.94,20444399.41,19328138.31,33786677.9,29787938.2,38394819.11,63469406.6,39474384.1,7774252.38,271253854.61,200592363.53,343077834.92,500758702.37,382631595.06,463569409.27,336662376.68,48907598.01,13719547.09,16168370.02,38896221.71,23079938.32,21608935.9,42356057.01,41826733.21,3392306.25,462073000.09,395817948.94,459499884.19,479168175.09,514782087.08,571934665.01,315486325.76,26578304.44,171455843.01,170463674.76,171661314.76,171893611.3,196939769.06,245987660.05,206734991.7,16963008.73,13523193.21,22198172.1,24579171.67,18856477.61,27827137.55,27784675.57,39611661.26,2990238.26,210210550.51,229712238.86,318409962.04,365859147.43,309781495.44,367653598.65,329683153.63,34491492.23,28333103.58,41732444.1,38841079.78,51189881.67,22159401.01,65196639.27,45703696.98,9461678.5,264027756.35,248579948.73,323896713.56,292898531.24,347569398.1,442615846.46,383272642.39,36102991.59,210351100.71,232406260.85,226470379.13,250319021,301519076.81,332952103.92,296853680.9,20064008.79,11795814.24,15857245.91,17547360.29,22712574.65,20812415.4,18794053.47,21886652.87,7450910.23,228640633.76,210599655.12,330421310.42,352356059.04,280161381.32,357593387.87,276229625.88,43643824.73,18136999.26,31123315.89,20501283.11,24851903.91,23482800.57,21937996.45,28147954.34,2946063.61,168774033.04,139548314.14,259437328.64,196489056.74,201422673.17,194732316.14,180791279.46,19202497,312695550.8,383380213.09,340911521.98,330836376.94,425404335.68,429781452,389799105.37,25893099.14,24045286.12,10378698.71,20543814.59,18445796.88,34263205.81,26365187.62,37587778.92,11347462.5,187936744.11,162353747.89,157480321.61,145285860.67,191716099.38,229654880.49,160874154.87,81558365.56,11576350.75,8533163.25,22835365.35,15896735.76,16397310.78,21321286.74,9938305.88,7346762.75,129262937.94,107645811.73,166201139.26,107752638.64,265953094.3,149045592.88,127594722.36,22081240.49,105800272.65,147441709.51,134084918.1,157523521.85,180693585.26,185058246.75,163131408.94,8148940.03,45416825.16,30059392.15,53388261.44,51751560.63,84660250.51,149729903.92,255924972.41,21085048.27,82150475.55,73232857.14,90437575.54,91112425.99,109973894.37,133777670.56,134670545.96,31370377.81,4028535.09,10693954.08,7867502.6,6245373.13,14342817.64,11587167.52,8340213.58,5817749.25,98506147.98,80872554.73,120054534.15,88569739.18,139156207.63,150157339.93,101313296.58,20959265.16,47591303.3,187810016.65,206008133.43,246108736.88,282526217.04,301555271.88,181025917.11,6840395.91,81212.5,1226862.5,2132217.32,8552968.49,7401571.79,28603530.67,12290579.01,872352.5,1242528.23,15557794.89,20059654.3,56958211.64,89603193.47,139096423.52,110555542.94,5722023.13,429224.93,3349018.22,4409177.87,16900342.02,8606857.9,25211143.07,13616631.11,256195,33004663.1,39024518.4,31390655.7,60899922.09,56855071.06,63427126.03,76639770.03,3182698.75,154405289.52,161962576.51,193182260.91,186118104.53,184985888.82,243129145.26,175747308.23,12205603.17,2063377.23,936609.12,5174894.56,2691636,1515759.08,2934649.75,4845456.7,2508570.5,77506877.31,45482777.52,88097216.95,115497486.81,82364295.63,91520806.62,81102975.76,13096926.9,19724427.55,24064019.23,31860642.22,19233290.87,15800569.24,20590209.14,27490330.64,2933328,32887135.18,17614230.06,29382272.85,24700396.33,31030439.57,24545819.44,36308109.89,4017065.25,85295522.85,104487214.69,94561164.56,106280322.83,105561062.89,144025533.71,104258351.65,5811895,10779316.93,9445718.86,8035608.96,9701255.56,17894707.22,14986255.54,19606189.33,1315087.5,78528215.49,83370748.69,87518647.32,84218638.27,99495780.65,91082621.31,86803998.91,5349141.95,3625496.61,5560420.42,2110937,6103029.22,2223071.3,1400851.87,3376366.95,1116450,49922381.84,46165845.31,56129581.96,53133821.68,78124932.02,86164769.89,62731724.43,6564903.23]},"columns":[{"accessor":"Country","name":"Country","type":"character"},{"accessor":"Call Year","name":"Call Year","type":"numeric"},{"accessor":"Type","name":"Type","type":"character"},{"accessor":"Participation Count","name":"Participation Count","type":"numeric","aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}}},{"accessor":"Nb Projects","name":"Nb Projects","type":"numeric","aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}}},{"accessor":"EU Contribution","name":"EU Contribution","type":"numeric","aggregate":"sum","format":{"cell":{"digits":2,"separators":true,"currency":"EUR"},"aggregated":{"digits":2,"separators":true,"currency":"EUR"}}}],"pivotBy":["Country","Call Year"],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"compact":true,"dataKey":"906f6b3330936d5063146fbe988087b4","key":"906f6b3330936d5063146fbe988087b4"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<div id="visual-summary" class="section level3">
<h3>Visual Summary</h3>
<pre class="r"><code>df %&gt;%
  group_by(Country = country) %&gt;%
  summarise(
    `EU Contribution` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  mutate(Country = fct_lump(Country, 10, w = `EU Contribution`)) %&gt;%
  group_by(Country) %&gt;%
  summarise(
    `EU Contribution` = sum(`EU Contribution`, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  arrange(desc(`EU Contribution`)) %&gt;%
  mutate(
    contrib_txt = format(
      `EU Contribution`,
      big.mark = &quot;,&quot;,
      decimal.mark = &quot;.&quot;,
      trim = TRUE,
      digits = 12),
    contrib_txt = str_c(&quot;â‚¬&quot;, contrib_txt)) %&gt;%
    write_csv(here(&quot;data&quot;, &quot;h2020-countries-treemap.csv&quot;))</code></pre>
<p><img src="https://raw.githubusercontent.com/zambujo/swissparticipation/main/data/treemap-countries.svg" title="A treemap of total EU contribution to the top 10 countries participating in H2020." /></p>
</div>
</div>
<div id="swiss-participation-an-overview" class="section level2">
<h2>Swiss participation: an overview</h2>
<p>Swiss participation in H2020: participation count, number of projects (distinct), total EU contribution by pillar, thematic priority, and call year.</p>
<pre class="r"><code>df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  group_by(
    Pillar = pillar_abbr, 
    Priority = thematic_priority_abbr, 
    `Call Year` = call_year) %&gt;%
  summarise(
    `Participation Count` = n(),
    `Nb Projects` = n_distinct(project_nbr),
    `EU Contribution` = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  mutate(
    `EU Contribution` = round(`EU Contribution`, 1)
  ) %&gt;%
  reactable(
    groupBy = c(&quot;Pillar&quot;, &quot;Priority&quot;),
    columns = list(
      `Participation Count` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE)),
      `Nb Projects` = colDef(
        aggregate = &quot;sum&quot;, 
        format = colFormat(separators = TRUE)),
      `EU Contribution` = colDef(
        aggregate = &quot;sum&quot;,
        format = colFormat(currency = &quot;EUR&quot;, separators = TRUE, digits = 2))
    ),
    highlight = TRUE,
    compact = TRUE
  )</code></pre>
<div id="htmlwidget-b1c205bba97fbb52c0ac" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b1c205bba97fbb52c0ac">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Pillar":["Cross-theme","Cross-theme","Cross-theme","Cross-theme","Euratom","Euratom","Euratom","Euratom","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","I","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","II","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","III","IV","IV","IV","IV","IV","IV","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V","V"],"Priority":["CROSST","CROSST","CROSST","CROSST","EURATOM","EURATOM","EURATOM","EURATOM","ERC","ERC","ERC","ERC","ERC","ERC","ERC","FET","FET","FET","FET","FET","FET","FET","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","INFRA","MSCA","MSCA","MSCA","MSCA","MSCA","MSCA","MSCA","INNOSUPSME","INNOSUPSME","INNOSUPSME","INNOSUPSME","INNOSUPSME","LEIT","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMANU","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-ADVMAT","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-BIOTECH","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-ICT","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-NMP","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","LEIT-SPACE","RISKFINANCE","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENERGY","ENV","ENV","ENV","ENV","ENV","ENV","ENV","ENV","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","FOOD","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","HEALTH","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SECURITY","SOCCHAL-CROSST","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","SOCIETY","TPT","TPT","TPT","TPT","TPT","TPT","TPT","TPT","TWINING","TWINING","TWINING","TWINING","WIDESPREAD","WIDESPREAD","CAREER","CAREER","CAREER","CAREER","CAREER","GENDEREQ","GOV","GOV","GOV","GOV","INEGSOC","INEGSOC","INEGSOC","INEGSOC","INEGSOC","RESACCESS","SCIENCE","SCIENCE","SWAFS-CROSST","SWAFS-CROSST"],"Call Year":[2016,2018,2019,2020,2014,2016,2018,2019,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2014,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2020,2014,2015,2016,2017,2018,2019,2020,2014,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2021,2014,2015,2016,2017,2018,2019,2020,2020,2014,2015,2016,2017,2018,2019,2020,2014,2015,2016,2017,2018,2019,2020,2021,2015,2017,2018,2019,2016,2018,2014,2017,2018,2019,2020,2014,2014,2015,2017,2018,2014,2015,2017,2019,2020,2018,2017,2018,2018,2020],"Participation Count":[1,3,11,4,16,16,15,15,30,131,98,96,100,107,43,21,5,24,60,57,91,75,39,16,37,33,35,28,43,7,80,161,162,142,179,190,192,3,4,88,106,17,1,11,19,15,27,16,16,21,3,3,17,16,18,16,12,3,2,4,4,11,1,59,66,87,56,72,89,80,14,5,5,15,5,14,11,5,10,12,10,10,1,23,50,51,53,63,51,36,8,28,16,18,29,33,21,24,14,19,21,35,40,24,50,44,6,37,60,60,53,86,72,78,21,5,14,11,15,8,16,12,5,12,3,8,4,9,8,6,23,14,49,45,33,62,35,3,6,2,2,7,3,2,2,2,1,2,2,2,3,1,1,2,2,1,2,4,2,3,1,1,1,5],"Nb Projects":[1,2,9,4,11,11,8,12,29,122,93,91,96,102,43,17,3,18,29,41,45,44,29,12,24,17,27,24,24,3,64,126,131,125,139,172,169,1,1,86,105,17,1,9,10,9,16,11,10,15,2,2,13,10,9,12,10,2,2,4,4,7,1,50,54,58,38,47,54,56,7,4,2,12,4,14,6,5,10,10,8,8,1,20,28,27,37,33,36,26,7,21,12,13,20,23,16,20,10,13,14,24,29,16,32,28,2,25,33,34,34,43,51,47,7,4,8,8,13,7,10,11,5,11,3,7,4,9,7,6,15,14,37,32,26,44,26,2,6,2,2,7,3,2,2,2,1,1,2,2,2,1,1,1,2,1,2,1,1,1,1,1,1,4],"EU Contribution":[606658,897898.9,7361418.9,1827695.6,893713.9,36364921.1,4602815.5,3325523.2,54254099,186586074,143129828.9,173286505.2,172447129,176950805.5,47081831.6,5031336,2509438.5,14423543.1,37399444.4,31338879.6,57389555.5,53766355.7,6454165.6,12104951.8,13165062.2,29042310.6,17155298,9236045.5,51747230.8,2783681.2,12666731.8,32811233.1,36068628,34257439.4,42037734.5,57604189.9,51780845,171759,402131.5,15739361.3,55849931.9,28736010.8,118125,17500,0,0,11766202.5,9337677.5,8786857.2,12837625,0,0,0,4798904.5,4950969,7088351.9,4862318.4,0,0,59812.5,974875,3718840.3,471250,577009.2,5002283.8,3767923.7,18696915.4,33862242.5,43372483.2,34336405.5,24375,543375,0,4540803.8,2589794.3,730625,0,69785.6,2013946.2,4478656.2,2937105.8,2896598.8,0,45220,4152292.3,503071.2,18282576.5,31043314.4,19347288.5,14664417.8,2711386.2,851030.2,0,1796555,8528579.6,11358624.8,11126911.4,6729491.4,5131500,32637.5,1217864.4,2303475,9742398.3,6559053.3,18775307.6,17830534.4,2598908.1,71245.6,810906,2356130.1,11230842.6,34779764.7,52650575,35213196.7,2554439.7,120250,0,2157071.1,6770027,2926429.4,4820571.9,5796444.9,9022139.8,0,0,48937.5,1263502.5,1869528.5,1821018.8,1617738.8,199096.9,0,7018341.8,15411743.5,11551171.4,16676124.8,9441921.2,975625,1229791.8,420816.2,343387.5,1145951.2,160093.8,2826077.5,170625,221850,49000,36852.5,127250,37512.5,0,0,37390.5,503277.5,0,0,330975.9,1119375,667885,396180,0,185875,33725,554708.8]},"columns":[{"accessor":"Pillar","name":"Pillar","type":"character"},{"accessor":"Priority","name":"Priority","type":"character"},{"accessor":"Call Year","name":"Call Year","type":"numeric"},{"accessor":"Participation Count","name":"Participation Count","type":"numeric","aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}}},{"accessor":"Nb Projects","name":"Nb Projects","type":"numeric","aggregate":"sum","format":{"cell":{"separators":true},"aggregated":{"separators":true}}},{"accessor":"EU Contribution","name":"EU Contribution","type":"numeric","aggregate":"sum","format":{"cell":{"digits":2,"separators":true,"currency":"EUR"},"aggregated":{"digits":2,"separators":true,"currency":"EUR"}}}],"pivotBy":["Pillar","Priority"],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"compact":true,"dataKey":"647bcd3e1792678fdbf863cbf9c04bf3","key":"647bcd3e1792678fdbf863cbf9c04bf3"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>stats_depth_1 &lt;-
  df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(!pillar_abbr %in% c(&quot;I&quot;, &quot;II&quot;, &quot;III&quot;)) %&gt;%
  group_by(pillar_abbr, pillar_descr) %&gt;%
  summarise(total_eu_contrib = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  unite(&quot;pillar&quot;, starts_with(&quot;pillar&quot;), sep = &quot;. &quot;) %&gt;%
  mutate(
    pillar = str_replace(pillar,
                         fixed(&quot;Cross-theme. Cross-theme&quot;),
                         &quot;Cross-theme&quot;),
    pillar = str_replace(
      pillar,
      fixed(&quot;Euratom. Euratom Research and Training Programme&quot;),
      &quot;Euratom&quot;
    ),
    thematic_priority_abbr = NA
  ) %&gt;%
  select(pillar,
         thematic_priority = thematic_priority_abbr,
         contrib = total_eu_contrib)

stats_depth_2 &lt;- df %&gt;%
  filter(country_code == &quot;CH&quot;) %&gt;%
  filter(pillar_abbr %in% c(&quot;I&quot;, &quot;II&quot;, &quot;III&quot;)) %&gt;%
  # simple stats
  group_by(pillar_abbr, pillar_descr, thematic_priority_abbr) %&gt;%
  summarise(total_eu_contrib = sum(eu_contribution, na.rm = TRUE)) %&gt;%
  ungroup() %&gt;%
  # for printing
  unite(&quot;pillar&quot;, starts_with(&quot;pillar&quot;), sep = &quot;. &quot;) %&gt;%
  select(pillar,
         thematic_priority = thematic_priority_abbr,
         contrib = total_eu_contrib)

# for treemap with https://rawgraphs.io
stats_depth_1 %&gt;%
  bind_rows(stats_depth_2) %&gt;%
  arrange(pillar, desc(contrib)) %&gt;%
  mutate(
    thematic_priority = replace_na(thematic_priority, &quot;&quot;),
    contrib_txt = contrib / 1000000,
    contrib_txt = format(
      contrib_txt,
      big.mark = &quot;,&quot;,
      decimal.mark = &quot;.&quot;,
      trim = TRUE,
      digits = 2),
    contrib_txt = str_c(&quot;Mâ‚¬&quot;, contrib_txt)) %&gt;%
  write_csv(here(&quot;data&quot;, &quot;h2020-treemap.csv&quot;))</code></pre>
<div id="visual-summary-1" class="section level3">
<h3>Visual summary</h3>
<p>A treemap of the overall H2020 EU contribution (MEUR) to Switzerland by Pillar and Thematic Priority. Focus on the three largest pillars.</p>
<p><img src="https://raw.githubusercontent.com/zambujo/swissparticipation/main/data/treemap.svg" title="A treemap of EU H2020 contribution to Swiss participants, by pillar and thematic priority." /></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
